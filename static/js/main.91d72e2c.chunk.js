(this["webpackJsonpobama-spillet"]=this["webpackJsonpobama-spillet"]||[]).push([[0],{11:function(e,a,t){e.exports=t.p+"static/media/obama.1bb75a73.png"},14:function(e,a,t){e.exports=t.p+"static/media/american-flag.8ced8f71.png"},21:function(e,a,t){e.exports=t.p+"static/media/obama-sangen.17e3cc89.mp3"},24:function(e,a,t){e.exports=t(35)},29:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(20),c=t.n(o),i=(t(29),t(6)),s=t(7),l=t(8),m=t(9),u=t(22),h=t(1),p=t(14),d=t.n(p),v=t(11),b=t.n(v),f=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"handlePlay",value:function(){this.props.history.push("/play")}},{key:"componentDidMount",value:function(){(new Image).src=d.a,(new Image).src=b.a}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"container wrapper"},r.a.createElement("div",{className:"center"},r.a.createElement("h1",{className:"font-weight-bold display-2 text-white"},"Vokt dem for Obama"),r.a.createElement("button",{onClick:function(){return e.handlePlay()},className:"btn btn-american-blue"},r.a.createElement("h2",{className:"font-weight-bold text-white"},"Spill")),r.a.createElement("h3",{className:"font-weight-bold text-white"},"Hold musepekeren unna Obama"))))}}]),t}(n.Component),w=t(13),g=t(21),y=t.n(g),O=function(){function e(a,t){Object(i.a)(this,e),this.pos=void 0,this.acc=void 0,this.pos=a,this.acc=t}return Object(s.a)(e,[{key:"move",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.pos.x+this.acc.x*t,r=this.pos.y+this.acc.y*t,o=a.w,c=a.h;n<0||n+o>e.x+e.w?this.acc.x=this.acc.x>0?-1:1:this.pos.x=n,r<0||r+c>e.y+e.h?this.acc.y=this.acc.y>0?-1:1:this.pos.y=r}}]),e}(),x=function(e,a){return Math.max(e,Math.floor(Math.random()*a))},E=function(e,a){return e.left<=a.x&&e.right>=a.x&&e.top<=a.y&&e.bottom>=a.y},j=function(e,a){var t=a.getBoundingClientRect();t&&(e.width=t.width,e.height=t.height)},k=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).canvas=r.a.createRef(),e.canvasWrapper=r.a.createRef(),e.obamaImg=new Image,e.americanFlag=new Image,e.obamaSong=new Audio(y.a),e.spawnInterval=null,e.updateInterval=null,e.obamas=[],e.currentDimension={w:50,h:50},e.mousePos=new DOMPoint,e.state={gameOver:!1,score:0},e.handleStartGame=function(){console.log("start");var a=Object(w.a)(e).obamaSong;a.loop=!0,a.play(),e.setState({gameOver:!1,score:0}),e.obamas=[],e.updateInterval=window.requestAnimationFrame(e.updateObama),e.spawnInterval=window.setInterval(e.spawnObama,1e3)},e.handleGameOver=function(){e.obamaSong.pause(),e.obamaSong.currentTime=0,e.setState({gameOver:!0}),e.spawnInterval&&window.clearInterval(e.spawnInterval),e.updateInterval&&window.cancelAnimationFrame(e.updateInterval),e.props.onGameOver(e.state.score)},e.drawObamas=function(){var a=e.canvas.current,t=Object(w.a)(e),n=t.obamaImg,r=t.currentDimension,o=r.w,c=r.h;if(a){var i=a.getContext("2d");i&&(i.clearRect(0,0,a.width,a.height),e.obamas.forEach((function(e){var a=e.pos,t=a.x,r=a.y;i.drawImage(n,t,r,o,c)})))}},e.spawnObama=function(){if(e.canvas.current){var a=e.canvas.current,t=a.width,n=a.height,r=e.currentDimension,o=r.w,c=r.h,i=x(o,t-o),s=x(c,n-c);e.obamas.push(new O({x:i,y:s},{x:Math.random()<.5?1:-1,y:Math.random()<.5?1:-1})),e.setState({score:e.obamas.length})}},e.updateObama=function(){if(e.canvas.current){var a=e.canvas.current,t=a.width,n=a.height;e.obamas.forEach((function(a){a.move({x:0,y:0,w:t,h:n},{w:e.currentDimension.w,h:e.currentDimension.h},2);var r=new DOMRect(a.pos.x,a.pos.y,e.currentDimension.w,e.currentDimension.h);E(r,e.mousePos)&&e.handleGameOver()})),e.drawObamas(),e.state.gameOver||window.requestAnimationFrame(e.updateObama)}},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.obamas,t=this.obamaImg,n=this.americanFlag,r=this.currentDimension,o=this.canvas.current,c=this.canvasWrapper.current;o&&c?(t.src=b.a,n.src=d.a,n.onload=function(){return e.handleStartGame()},j(o,c),o.onresize=function(){j(o,c),e.drawObamas()},o.onmousemove=function(t){var n=e.mousePos=function(e,a){var t=e.getBoundingClientRect();return new DOMPoint(a.clientX-t.left,a.clientY-t.top)}(o,t);a.some((function(e){var a=new DOMRect(e.pos.x,e.pos.y,r.w,r.h);return E(a,n)}))&&e.handleGameOver()}):console.error("Failed to load references")}},{key:"componentWillUnmount",value:function(){this.handleGameOver()}},{key:"render",value:function(){var e=this.state.score,a=this.props.className;return r.a.createElement("div",{className:a,ref:this.canvasWrapper,style:{width:"80%",height:"80%"}},r.a.createElement("canvas",{className:"border border-white",ref:this.canvas,style:{backgroundImage:"url(".concat(this.americanFlag.src,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),r.a.createElement("div",{className:"d-flex text-white text-bold"},r.a.createElement("div",{className:"display-2 mx-auto"},e)))}}]),t}(n.Component),N=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={playing:!0,score:0},e}return Object(s.a)(t,[{key:"handlePlayAgain",value:function(){this.setState({playing:!0,score:0})}},{key:"render",value:function(){var e=this,a=this.state,t=a.playing,n=a.score;return r.a.createElement("div",{className:"h-100 mt-4"},t?r.a.createElement(k,{className:"mx-auto",onGameOver:function(a){return e.setState({playing:!1,score:a})}}):r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"center"},r.a.createElement("img",{className:"mb-1",src:b.a,width:"100",height:"auto",alt:"obama"}),r.a.createElement("h1",{className:"font-weight-bold display-2 text-white"},"Spillet er over"),r.a.createElement("h2",{className:"font-weight-bold text-american-blue mb-4"},"Antall Obamahoder f\xf8r du tapte:"),r.a.createElement("h2",{className:"font-weight-bold text-american-blue"},n),r.a.createElement("button",{onClick:function(){return e.handlePlayAgain()},className:"btn btn-american-blue"},r.a.createElement("h2",{className:"font-weight-bold text-white"},"Spill igjen")))))}}]),t}(n.Component),I=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(u.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:f}),r.a.createElement(h.a,{exact:!0,path:"/play",component:N})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.91d72e2c.chunk.js.map